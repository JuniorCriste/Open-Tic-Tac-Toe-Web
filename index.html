<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Open Tic Tac Toe Web</title>

<style>
:root {
    --x-color: #2ecc71;
    --o-color: #9b59b6;
}

* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Segoe UI', Arial, sans-serif;
    background: radial-gradient(circle at top, #1b1b1b, #0e0e0e);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #fff;
}

/* CONTAINER CENTRAL */
.main {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    text-align: center;
}

/* HEADER */
header {
    display: flex;
    align-items: center;
    gap: 10px;
}

header img {
    width: 34px;
    opacity: 0.9;
}

header h1 {
    margin: 0;
    font-size: 26px;
    font-weight: 600;
}

/* JOGO */
.game-container {
    display: flex;
    gap: 25px;
    padding: 25px;
    border-radius: 20px;
    background: rgba(255,255,255,0.06);
    backdrop-filter: blur(8px);
    box-shadow: 0 25px 60px rgba(0,0,0,0.6);
}

/* TABULEIRO */
.board {
    display: grid;
    grid-template-columns: repeat(3, minmax(70px, 120px));
    grid-template-rows: repeat(3, minmax(70px, 120px));
    gap: 15px;
}

.cell {
    background: rgba(255,255,255,0.95);
    border-radius: 16px;
    font-size: clamp(40px, 8vw, 64px);
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    user-select: none;
    transition: transform .15s, box-shadow .15s;
}

.cell:hover { transform: scale(1.05); }
.cell.active { box-shadow: 0 0 20px #3498db; }

.cell.x { color: var(--x-color); }
.cell.o { color: var(--o-color); }

/* PAINEL */
.panel {
    width: 220px;
    background: rgba(255,255,255,0.95);
    color: #222;
    border-radius: 16px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 14px;
}

.player {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
}

.player img {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    opacity: 0.7;
}

/* ðŸ”¹ anima SOMENTE no jogador da rodada */
.player.active img {
    opacity: 1;
    animation: float 1.8s ease-in-out infinite;
    box-shadow: 0 0 14px rgba(0,0,0,0.35);
}

@keyframes float {
    0%,100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
}

.scoreboard {
    background: rgba(0,0,0,0.06);
    border-radius: 12px;
    padding: 10px;
    text-align: center;
}

.scoreboard p {
    margin: 6px 0;
    font-size: 15px;
    font-weight: 600;
}

.status {
    text-align: center;
    font-weight: bold;
}

/* TEXTO DE ATALHO */
.shortcut {
    margin-top: 6px;
    padding: 10px 16px;
    background: rgba(255,255,255,0.08);
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    color: #f1f1f1;
}

/* OVERLAY */
.overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.65);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 10;
}

.overlay.show { display: flex; }

.result-box {
    background: #fff;
    color: #222;
    padding: 30px 60px;
    border-radius: 20px;
    text-align: center;
    animation: pop .4s ease;
}

.result-box img {
    width: 80px;
    margin-bottom: 15px;
}

@keyframes pop {
    from { transform: scale(.6); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

/* FOOTER */
footer {
    font-size: 13px;
    color: #aaa;
}

/* RESPONSIVO */
@media (max-width: 768px) {
    .game-container {
        flex-direction: column;
        align-items: center;
    }
    .panel {
        width: 100%;
        max-width: 320px;
    }
}
</style>
</head>

<body>

<div class="main">

<header>
    <img src="assets/Imgs/icon_v2.png" alt="Logo">
    <h1>Open Tic Tac Toe Web</h1>
</header>

<div class="game-container">

    <div class="panel">
        <div class="player active" id="p1">
            <img src="assets/Players/people1.png">
            Jogador 1 (X)
        </div>

               <div class="player" id="p2">
            <img src="assets/Players/people2.png">
            Jogador 2 (O)
        </div>

        <div class="status" id="status">Vez do Jogador 1</div>
	
	<br/>
	
	 <div class="scoreboard">
            <p>Jogador 1: <span id="scoreX">0</span></p>
            <p>Jogador 2: <span id="scoreO">0</span></p>
            <p>Empates: <span id="scoreDraw">0</span></p>
        </div>

    </div>

    <div class="board">
        <div class="cell" data-index="6"></div>
        <div class="cell" data-index="7"></div>
        <div class="cell" data-index="8"></div>

        <div class="cell" data-index="3"></div>
        <div class="cell" data-index="4"></div>
        <div class="cell" data-index="5"></div>

        <div class="cell" data-index="0"></div>
        <div class="cell" data-index="1"></div>
        <div class="cell" data-index="2"></div>
    </div>

</div>

<div class="shortcut">
    Pressione as teclas <strong>1 + 2 + 3</strong> juntas para retornar ao
    <strong>Painel JosÃ© Teixeira Fialho</strong>
</div>

<footer>
    Desenvolvido por Junior Criste - github.com/JuniorCriste (versÃ£o 1.0)
</footer>

</div>

<div class="overlay" id="overlay">
    <div class="result-box" id="resultBox"></div>
</div>

<script>
const cells = document.querySelectorAll('.cell');
const statusText = document.getElementById('status');
const overlay = document.getElementById('overlay');
const resultBox = document.getElementById('resultBox');

const p1 = document.getElementById('p1');
const p2 = document.getElementById('p2');

const scoreXEl = document.getElementById('scoreX');
const scoreOEl = document.getElementById('scoreO');
const scoreDrawEl = document.getElementById('scoreDraw');

let board = Array(9).fill('');
let currentPlayer = 'X';
let playing = true;
let scoreX = 0, scoreO = 0, scoreDraw = 0;

const wins = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
];

/* SONS */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function sound(freq, dur) {
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    g.gain.value = 350;
    o.frequency.value = freq;
    o.connect(g);
    g.connect(audioCtx.destination);
    o.start();
    g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + dur);
    o.stop(audioCtx.currentTime + dur);
}

function updateTurn() {
    p1.classList.toggle('active', currentPlayer === 'X');
    p2.classList.toggle('active', currentPlayer === 'O');
    statusText.textContent = currentPlayer === 'X'
        ? 'Vez do Jogador 1'
        : 'Vez do Jogador 2';
}

function checkWin() {
    return wins.some(w => w.every(i => board[i] === currentPlayer));
}

function endGame(type) {
    playing = false;
    sound(type === 'draw' ? 380 : 900, .6);

    if (type === 'draw') scoreDraw++;
    else if (currentPlayer === 'X') scoreX++;
    else scoreO++;

    scoreXEl.textContent = scoreX;
    scoreOEl.textContent = scoreO;
    scoreDrawEl.textContent = scoreDraw;

    const img = type === 'draw'
        ? 'assets/Players/pc.png'
        : currentPlayer === 'X'
            ? 'assets/Players/people1.png'
            : 'assets/Players/people2.png';

    resultBox.innerHTML = `
        <img src="${img}">
        <h2>${type === 'draw' ? 'Deu Velha!' :
        (currentPlayer === 'X' ? 'Jogador 1 venceu!' : 'Jogador 2 venceu!')}</h2>
    `;

    overlay.classList.add('show');
    setTimeout(resetGame, 2500);
}

function resetGame() {
    board.fill('');
    cells.forEach(c => { c.textContent = ''; c.className = 'cell'; });
    overlay.classList.remove('show');
    currentPlayer = 'X';
    playing = true;
    updateTurn();
}

function makeMove(i) {
    if (!playing || board[i]) return;
    board[i] = currentPlayer;
    const c = document.querySelector(`.cell[data-index="${i}"]`);
    c.textContent = currentPlayer;
    c.classList.add(currentPlayer === 'X' ? 'x' : 'o');

    if (checkWin()) return endGame('win');
    if (board.every(v => v)) return endGame('draw');

    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
    updateTurn();
}

/* CLIQUE */
cells.forEach(c => c.addEventListener('click', () => makeMove(+c.dataset.index)));

/* TECLADO */
const map = {'1':0,'2':1,'3':2,'4':3,'5':4,'6':5,'7':6,'8':7,'9':8};
let combo = new Set();

document.addEventListener('keydown', e => {
    if (map[e.key] !== undefined) {
        const cell = document.querySelector(`.cell[data-index="${map[e.key]}"]`);
        cell.classList.add('active');
        setTimeout(() => cell.classList.remove('active'), 120);
        makeMove(map[e.key]);
    }

    if (['1','2','3'].includes(e.key)) {
        combo.add(e.key);
        if (combo.size === 3) {
            window.location.href = 'https://juniorcriste.github.io/QuizCapixaba/';
        }
    }
});

document.addEventListener('keyup', e => {
    if (['1','2','3'].includes(e.key)) combo.delete(e.key);
});
</script>

</body>
</html>
